import React, { useState, useEffect } from "react";
import { Container, Col, Form } from "react-bootstrap";
import Layout from "./layout";
import NavigationBar from "./navigationBar";
import userProfile from "../assets/user.gif";
import styled from "styled-components";
import emblem from "../assets/fire.gif";
import axios from "axios";

const Styles = styled.div`
  .circle-img {
    border-radius: 50%;
    border: 7px solid #fff;
    width: 150px;
    height: 150px;
    margin: auto;
    display: block;
  }

  $avatar-size: 32px;
  $body-background: #353535;

  @font-face {
    font-family: "ubuntu";
    font-style: italic;
    font-weight: 300;
    src: local("Lato Light Italic"), local("Lato-LightItalic"),
      url(https://fonts.gstatic.com/s/ubuntucondensed/v8/u-4k0rCzjgs5J7oXnJcM_0kACGMtT-Dfqw.woff2)
        format("woff2");
  }

  .wrapper {
    overflow: hidden;
  }

  .wrapper {
    text-align: center;
    h1 {
      color: #fff;
      font-size: 92px;
      font-family: "ubuntu";
      text-transform: uppercase;
      font-weight: 700;

      font-family: "Josefin Sans", sans-serif;
      background: linear-gradient(
        to right,
        rgba(185, 89, 188, 1) 10%,
        rgba(73, 89, 200, 1) 70%
      );
      background-size: auto auto;
      background-clip: border-box;
      background-size: 200% auto;
      color: #fff;
      background-clip: text;
      text-fill-color: transparent;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: textclip 100s linear infinite;
      display: inline-block;
    }
  }

  @keyframes textclip {
    to {
      background-position: 200% center;
    }
  }

  .container {
    background-color: white;
    margin-top: 50px;
    border-radius: 15px 15px 15px 15px;
  }

  .button {
    border-radius: 50%;
    border: none;
    width: 80px;
    height: 80px;
    position: relative;
    float: right;
    margin-bottom: 20px;
    margin-right: 10px;
    cursor: pointer;
    background-color: #66a5ad;
    top: -40px;
    transition: transform 0.7s ease-in-out;
    &:hover {
      transform: rotate(40deg);
    }
  }

  .button-2 {
    border-radius: 50%;
    border: none;
    width: 80px;
    height: 80px;
    position: relative;
    float: right;
    margin-bottom: 20px;
    margin-right: 10px;
    cursor: pointer;
    background-color: #008b8b;
    font-weight: 600;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    color: white;
    top: -40px;
    transition: transform 0.7s ease-in-out;
    &:hover {
      transform: rotate(40deg);
    }
  }

  .bottom-group {
    margin-bottom: 60px;
  }

  .form {
    padding: 5px;
  }

  .form-row-1 {
    padding: 2px;
  }

  .form-control {
    background-color: #f5f5f5;
    border-radius: 15px;
    font-weight: 700;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  }

  .form-label {
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    font-weight: 600;
  }

  .edit-info {
    margin-right: auto;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    color: #ff7f50;
  }

  .edit-control {
    margin-left: auto;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    color: black;
  }

  .emblem {
    width: 40px;
    height: 40px;
    margin: auto;
    display: inline;
  }
`;

function UserInfo(props) {
  const [image, setImage] = useState("");
  const [completed, setCompleted] = useState(false);

  const [user, setUsers] = useState([
    {
      firstname: "",
      lastname: "",
      username: "",
      birth: "",
      gender: "",
      phone: "",
      address: "",
      city: "",
      state: "",
      zip: "",
      addressShip: "",
      cityShip: "",
      stateShip: "",
      zipShip: "",
      skill1: "",
      skill2: "",
      skill3: "",
      skiing: "",
      react: "",
      email: "",
      password: "",
    },
  ]);

  useEffect(() => {
    fetch("/infoFound")
      .then((res) => {
        if (res.ok) {
          return res.json();
        }
      })
      .then((jsonRes) => setUsers(jsonRes));
  });

  useEffect(() => {
    fetch("/completedStranger")
      .then((res) => {
        if (res.ok) {
          return res.json();
        }
      })
      .then((response) => setCompleted(response.completed));
  });

  useEffect(() => {
    axios
      .get("/strangerPhoto")
      .then((response) => [setImage(response.data.photo)])

      .catch((error) => console.log(error));
  }, []);

  return (
    <Styles>
      <React.Fragment>
        <NavigationBar loggedIn={props.loggedIn} />
        <Container className="container">
          <Layout className="layout">
            <Form className="form">
              {completed ? (
                <img
                  className="circle-img"
                  src={`/uploads/${image}`}
                  alt="..."
                />
              ) : (
                <img className="circle-img" src={userProfile} alt="icons8" />
              )}

              {completed ? (
                <img className="emblem" src={emblem} alt="pngTree" />
              ) : (
                <h5>Incomplete Profile</h5>
              )}
              <div className="wrapper">
                <h1 className="username">{user.username}</h1>
              </div>
              <Form.Row className="form-row-1">
                <Form.Group as={Col} md="4">
                  <Form.Label className="form-label">First name:</Form.Label>
                  <Form.Control
                    className="form-control"
                    name="firstname"
                    type="text"
                    value={user.firstname}
                    disabled
                  />
                </Form.Group>
                <Form.Group as={Col} md="4">
                  <Form.Label>Last name:</Form.Label>
                  <Form.Control
                    name="lastname"
                    type="text"
                    value={user.lastname}
                    disabled
                  />
                </Form.Group>
                <Form.Group as={Col} md="4">
                  <Form.Label>Phone:</Form.Label>
                  <Form.Control
                    name="phone"
                    type="text"
                    value={user.phone}
                    disabled
                  />
                </Form.Group>
              </Form.Row>
              <Form.Row>
                <Form.Group as={Col} md="6">
                  <Form.Label>City:</Form.Label>
                  <Form.Control
                    name="city"
                    type="text"
                    value={user.city}
                    disabled
                  />
                </Form.Group>

                <Form.Group as={Col} md="6">
                  <Form.Label>State:</Form.Label>
                  <Form.Control
                    name="state"
                    type="text"
                    value={user.city}
                    disabled
                  />
                </Form.Group>
              </Form.Row>
              <Form.Row className="bottom-row">
                <Form.Group as={Col} md="4">
                  <Form.Label>Skill 1</Form.Label>
                  <Form.Control
                    as="textarea"
                    rows={3}
                    value={user.skill1}
                    name="skill1"
                    type="text"
                    disabled
                  />
                </Form.Group>
                <Form.Group as={Col} md="4">
                  <Form.Label>Skill 2</Form.Label>
                  <Form.Control
                    as="textarea"
                    rows={3}
                    value={user.skill2}
                    name="skill2"
                    type="text"
                    disabled
                  />
                </Form.Group>
                <Form.Group as={Col} md="4">
                  <Form.Label>Skill 3</Form.Label>
                  <Form.Control
                    as="textarea"
                    rows={3}
                    value={user.skill3}
                    name="skill3"
                    type="text"
                    disabled
                  />
                </Form.Group>
              </Form.Row>
              <Form.Row>
                <Form.Group as={Col} md="6">
                  <Form.Label>Skiing?</Form.Label>
                  <Form.Control
                    name="skiing"
                    type="text"
                    value={user.skiing}
                    disabled
                  />
                </Form.Group>
                <Form.Control.Feedback>Looks good!</Form.Control.Feedback>
                <Form.Group as={Col} md="6" controlId="validationCustom04">
                  <Form.Label>React?</Form.Label>
                  <Form.Control
                    name="react"
                    type="text"
                    value={user.react}
                    disabled
                  />
                </Form.Group>
              </Form.Row>
            </Form>
          </Layout>
        </Container>
      </React.Fragment>
    </Styles>
  );
}

export default UserInfo;
